# CAPAS (Coin Alert Prediction & Analysis System)

## 암호화폐 예측 알림 시스템 - 전체 프로젝트 기획서

---

## 📌 1. 프로젝트 개요

### 1.1 프로젝트 목표
Bithumb Open API를 활용하여 **5%/10% 목표 수익률 달성 시점을 예측**하고, 백테스팅을 통해 전략의 유효성을 검증하는 **실시간 암호화폐 분석 시스템** 구축

### 1.2 핵심 가치 제안
- ✅ **단순성(Simplicity)**: 복잡한 딥러닝 대신 검증된 기술적 지표 사용
- ✅ **실행 가능성(Actionable)**: 명확한 매수/매도 신호 제공
- ✅ **투명성(Transparency)**: 백테스팅 결과로 전략 신뢰도 검증

### 1.3 타겟 사용자
- 암호화폐 투자 초보자 ~ 중급자
- 명확한 목표 수익률 기반 투자를 원하는 사람
- 복잡한 자동매매 봇 대신 간단한 신호를 원하는 투자자

---

## 🎯 2. 핵심 기능

### 2.1 현재 구현된 기능 (MVP)

| 기능 | 설명 | 상태 |
|------|------|------|
| **마켓 조회** | Bithumb 전체 KRW 마켓 목록 | ✅ 완료 |
| **실시간 현재가** | 선택한 코인의 현재가 및 전일 대비 | ✅ 완료 |
| **캔들 데이터** | 최근 200일 일봉 데이터 수집 (분봉/일봉/주봉 지원) | ✅ 완료 |
| **기술적 지표** | MA5/20/60, RSI, 거래량, 변동성 | ✅ 완료 |
| **백테스팅 엔진** | 5%/10% 목표 수익률 검증 (커스텀 파라미터 지원) | ✅ 완료 |
| **차트 시각화** | 실시간 가격 추이 차트 (줌, 시간 범위 조정) | ✅ 완료 |
| **성과 분석** | 성공률, 평균수익률, 최대낙폭 | ✅ 완료 |
| **모의투자** | 가상 계좌를 통한 실시간 매수/매도 시뮬레이션 | ✅ 완료 |
| **보유 코인 관리** | 보유 코인별 추가 매수/매도 모달 | ✅ 완료 |
| **실시간 평가 손익** | 보유 코인 가격 10초마다 자동 업데이트 | ✅ 완료 |
| **라이선스 시스템** | Supabase 기반 라이선스 키 관리 | ✅ 완료 |
| **데이터 관리** | 거래 내역 내보내기/가져오기/초기화 | ✅ 완료 |

### 2.2 핵심 알고리즘

#### 매수 신호 조건 (3단 필터링)
```javascript
1차: 골든크로스 (MA5 > MA20, 이전은 MA5 <= MA20)
2차: RSI 적정 구간 (30 < RSI < 70)
3차: 거래량 급증 (20일 평균 대비 150% 이상)
```

#### 수익/손실 기준
- **목표 수익**: 5% 또는 10%
- **손절 기준**: -2% (10일 내 목표 미달성 시)
- **기대 기간**: 10일 이내 목표가 도달

#### 백테스팅 지표
- **성공률**: 목표 수익률 달성 비율
- **평균 수익률**: 거래당 평균 수익 (손실 포함)
- **총 수익률**: 누적 수익률
- **최대 낙폭**: 연속 손실 시 최대 하락폭

---

## 🏗️ 3. 시스템 아키텍처

### 3.1 기술 스택

```
프론트엔드 (React)
  ├─ React 18.2
  ├─ Vite (빌드 도구)
  ├─ TailwindCSS (스타일)
  ├─ Recharts (차트)
  └─ Lucide React (아이콘)

백엔드 (Node.js)
  ├─ Express 4.18
  ├─ Axios (HTTP 클라이언트)
  └─ CORS (보안)

외부 API
  └─ Bithumb Public API
```

### 3.2 시스템 흐름도

```
[사용자] 
   ↓ (코인 선택 + 분석 요청)
[React Frontend] (localhost:5173)
   ↓ (HTTP Request)
[Node.js Backend] (localhost:5000)
   ↓ (API 호출)
[Bithumb API]
   ↓ (캔들 데이터)
[Backend - 지표 계산]
   ↓ (백테스팅 실행)
[Backend - 결과 반환]
   ↓ (JSON Response)
[Frontend - 시각화]
   ↓ (차트 + 통계)
[사용자에게 표시]
```

### 3.3 API 엔드포인트

| 메서드 | 경로 | 기능 | Rate Limit |
|--------|------|------|------------|
| GET | `/api/markets` | 마켓 목록 | 100ms 지연 |
| GET | `/api/ticker/:market` | 현재가 조회 | 100ms 지연 |
| GET | `/api/candles/:market` | 캔들 데이터 | 100ms 지연 |
| POST | `/api/indicators` | 지표 계산 | - |
| POST | `/api/backtest` | 백테스팅 | - |

---

## 📊 4. 백테스팅 전략 상세

### 4.1 데이터 수집
- **기간**: 최근 200일 (약 6~7개월)
- **단위**: 일봉 (Day Candle)
- **필드**: 시가/고가/저가/종가/거래량

### 4.2 지표 계산 로직

#### 이동평균선 (MA - Moving Average)
```javascript
MA(n) = (P₁ + P₂ + ... + Pₙ) / n

MA5:  최근 5일 평균
MA20: 최근 20일 평균
MA60: 최근 60일 평균
```

#### RSI (Relative Strength Index)
```javascript
상승폭 평균 = 최근 14일 상승분의 평균
하락폭 평균 = 최근 14일 하락분의 평균
RS = 상승폭 평균 / 하락폭 평균
RSI = 100 - (100 / (1 + RS))

해석:
- RSI < 30: 과매도 (저평가)
- RSI > 70: 과매수 (고평가)
- 30~70: 적정 구간
```

#### 거래량 비율
```javascript
평균 거래량 = 최근 20일 거래량 평균
거래량 비율 = (현재 거래량 / 평균 거래량) × 100

150% 이상 = 급증 신호
```

#### 변동성 (Volatility)
```javascript
표준편차 = √(Σ(가격 - 평균)² / n)
변동성 = (표준편차 / 평균가격) × 100
```

### 4.3 백테스팅 프로세스

```
1. 60일 이후 데이터부터 시작 (지표 계산 위해)

2. 각 시점에서:
   - MA5/MA20 계산
   - RSI 계산
   - 거래량 비율 계산

3. 매수 신호 발생 시:
   - 진입가 = 현재가
   - 목표가 = 진입가 × 1.05 (또는 1.10)

4. 향후 10일 동안:
   - 고가가 목표가 도달 → 성공
   - 저가가 손절가 도달 → 실패 (-2%)
   - 10일 만료 → 실패 (-2%)

5. 결과 집계:
   - 성공/실패 횟수
   - 평균 수익률
   - 최대 연속 손실
```

---

## 💡 5. 백테스팅 결과 해석 가이드

### 5.1 성공률 기준

| 성공률 | 평가 | 투자 전략 |
|--------|------|----------|
| **60% 이상** | ✅ 우수 | 적극 투자 가능 |
| **50~60%** | ⚠️ 보통 | 리스크 관리 필수 |
| **50% 미만** | ❌ 위험 | 전략 재검토 |

### 5.2 평균 수익률 기준

| 평균 수익률 | 의미 | 조치 |
|------------|------|------|
| **+2% 이상** | 장기 수익 가능 | 지속 운영 |
| **0~2%** | 손익분기 근처 | 전략 개선 |
| **음수** | 손실 위험 | 전략 폐기 |

### 5.3 최대 낙폭 관리

```
최대 낙폭 = 연속 손실 시 최악의 손실률

-10% 이내: 관리 가능
-20% 이상: 위험 신호
```

**투자 자금 관리 예시:**
- 총 자산 1000만원
- 최대 낙폭 -15%
- **안전 투자금**: 500만원 이하 (최악 손실 75만원)

---

## 🚀 6. 주요 기능 상세

### 6.1 대시보드 (Dashboard)

대시보드는 코인 분석의 시작점입니다. 실시간 차트와 기술적 지표를 한눈에 확인할 수 있습니다.

**주요 기능:**
- 📊 **실시간 차트**: 분봉/일봉/주봉 선택, 줌 기능, 시간 범위 조정
- 📈 **기술적 지표**: MA5/20/60, RSI, 거래량, 변동성 실시간 표시
- 🔍 **분석 실행**: "분석 시작" 버튼으로 즉시 분석 및 백테스팅 실행
- 📉 **가격 정보**: 현재가, 전일 대비, 고가/저가/거래량

**이미지 섹션:**
<!-- 대시보드 스크린샷을 여기에 추가하세요 -->
![대시보드](./images/dashboard.png)

---

### 6.2 모의투자 (Trading)

가상 계좌를 통해 실제 거래와 동일한 환경에서 매수/매도를 연습할 수 있습니다.

**주요 기능:**
- 💰 **가상 계좌**: 초기 자금 설정 (기본 100만원)
- 📊 **실시간 차트**: 선택한 코인의 실시간 가격 차트
- 🛒 **매수/매도 주문**: 수량 입력 또는 빠른 설정 (10%, 25%, 50%, 100%)
- 🔔 **토스트 알림**: 주문 체결 시 알림 표시
- 💵 **잔액 관리**: 실시간 잔액 업데이트

**이미지 섹션:**
<!-- 모의투자 화면 스크린샷을 여기에 추가하세요 -->
![모의투자](./images/trading.png)

---

### 6.3 백테스팅 (Backtest)

과거 데이터를 기반으로 전략의 성과를 검증합니다.

**주요 기능:**
- 🎯 **목표 수익률**: 5%, 10% 또는 커스텀 설정
- 🛑 **손절 기준**: 기본 -2% (커스텀 가능)
- ⏱️ **보유 기간**: 최대 보유 기간 설정
- 📊 **RSI 필터**: RSI 범위 설정 (예: 30~70)
- 📈 **거래량 필터**: 거래량 임계값 설정
- 📉 **결과 분석**: 성공률, 평균 수익률, 최대 낙폭, 총 거래 횟수

**커스텀 파라미터 예시:**
```
목표 수익률: 7%
손절 기준: -3%
최대 보유 기간: 15일
RSI 범위: 35~65
거래량 임계값: 120%
```

**이미지 섹션:**
<!-- 백테스팅 화면 스크린샷을 여기에 추가하세요 -->
![백테스팅](./images/backtest.png)

---

### 6.4 내 계좌 (Account)

보유 코인 관리, 거래 내역, 수익/손실 현황을 확인할 수 있습니다.

**주요 기능:**
- 💼 **계좌 현황**: 초기 자금, 현재 잔액, 총 자산 (보유 코인 가치 포함)
- 📊 **보유 코인 평가 손익**: 
  - 보유 수량, 평균 매수가, 현재가
  - 평가 손익 (미실현 수익/손실)
  - 실시간 가격 업데이트 (10초마다)
- 🛒 **보유 코인 거래 모달**:
  - 보유 코인 클릭 시 거래 모달 열기
  - 추가 매수: 보유 코인 추가 구매
  - 매도: 부분 매도 가능 (10%, 25%, 50%, 100%)
  - 빠른 설정 버튼으로 편리한 주문
- 📝 **거래 내역**:
  - 매수/매도 기록 확인
  - 실현 수익/손실 표시
  - 개별 삭제 또는 선택 삭제
- 💾 **데이터 관리**: 
  - 거래 내역 내보내기 (JSON)
  - 거래 내역 가져오기
  - 계좌 초기화

**실현 수익/손실 계산:**
- 매도 시에만 실현 수익/손실이 반영됩니다
- 평균 매수가 기준으로 profit 계산
- 총 수익, 실현 수익, 총 손실, 실현 손실 자동 계산

**이미지 섹션:**
<!-- 내 계좌 화면 스크린샷을 여기에 추가하세요 -->
![내 계좌](./images/account.png)

<!-- 보유 코인 거래 모달 스크린샷을 여기에 추가하세요 -->
![보유 코인 거래 모달](./images/account-modal.png)

---

### 6.5 설정 (Settings)

애플리케이션 설정 및 데이터 관리를 수행합니다.

**주요 기능:**
- 🔑 **라이선스 관리**: 
  - 라이선스 키 입력 및 활성화
  - 라이선스 상태 확인
  - Supabase 기반 라이선스 검증
- 💾 **데이터 관리**:
  - 거래 내역 내보내기/가져오기
  - 계좌 데이터 초기화
- ⚙️ **애플리케이션 설정**: 
  - 초기 자금 변경
  - 서버 연결 상태 확인

**이미지 섹션:**
<!-- 설정 화면 스크린샷을 여기에 추가하세요 -->
![설정](./images/settings.png)

---

### 6.6 실전 사용 가이드

**분석 프로세스:**
```
1단계: 대시보드에서 코인 선택
   └─ 드롭다운에서 관심 코인 선택

2단계: 분석 실행
   └─ "분석 시작" 버튼 클릭

3단계: 현재 상태 확인
   ├─ 현재가, 전일 대비
   ├─ 골든크로스 여부
   └─ RSI 수치

4단계: 백테스팅 결과 검토
   ├─ 5% 목표 성공률
   ├─ 10% 목표 성공률
   └─ 평균 수익률

5단계: 모의투자로 연습
   └─ 가상 계좌에서 매수/매도 연습

6단계: 내 계좌에서 관리
   └─ 보유 코인 추가 매수/매도
```

### 6.2 실전 투자 예시

**시나리오: KRW-BTC 분석 결과**
```
성공률: 65%
평균 수익률: +3.2%
최대 낙폭: -8%
```

**투자 전략:**
1. 총 투자금: 500만원
2. 매수 신호 대기
3. 신호 발생 시: 500만원 진입
4. 목표: +5% (25만원 수익)
5. 손절: -2% (10만원 손실)

**예상 결과 (10회 반복):**
- 성공 6~7회: +150~175만원
- 실패 3~4회: -30~40만원
- **순수익**: +110~135만원 (22~27% 수익률)

---

## 📈 7. Phase별 로드맵

### Phase 1: MVP (현재 완료) ✅
- [x] Bithumb API 연동
- [x] 기술적 지표 계산
- [x] 백테스팅 엔진 (커스텀 파라미터 지원)
- [x] 웹 UI/UX (Glassmorphism 디자인)
- [x] 차트 시각화 (실시간 업데이트, 줌 기능)
- [x] 모의투자 시스템 (가상 계좌)
- [x] 보유 코인 관리 (추가 매수/매도 모달)
- [x] 실시간 평가 손익 (10초마다 자동 업데이트)
- [x] 라이선스 시스템 (Supabase 연동)
- [x] 데이터 관리 (내보내기/가져오기/초기화)
- [x] 로컬 스토리지 데이터 영속성
- [x] React Router 기반 페이지 라우팅

### Phase 2: 고도화 (1~2개월) 🔄
- [ ] **실시간 알림**: 매수 신호 발생 시 알림
- [ ] **카카오톡 연동**: 알림톡으로 신호 전송
- [ ] **사용자 설정**: 개인별 목표 수익률 설정
- [ ] **포트폴리오**: 여러 코인 동시 추적
- [ ] **LSTM 모델**: 딥러닝 예측 도입
- [ ] **WebSocket**: 실시간 데이터 스트리밍
- [ ] **Redis 캐싱**: 성능 최적화

### Phase 3: 확장 (6개월 이후) 🔮
- [ ] **주식 시장 연동**: KOSPI/KOSDAQ
- [ ] **다중 거래소**: 업비트, 코인원
- [ ] **모바일 앱**: React Native
- [ ] **자동 매매**: Bithumb Private API
- [ ] **AI 리포트**: 자동 분석 리포트 생성

---

## 🛡️ 8. 보안 및 제약사항

### 8.1 Bithumb API Rate Limit
```
Public API: 150회/초 (IP 기준)
초과 시: 1분간 차단

대응책:
- 요청마다 100ms 지연
- 캐싱 활용
- 큐잉 시스템
```

### 8.2 CORS 정책
- **문제**: 브라우저에서 직접 API 호출 불가
- **해결**: Node.js 백엔드 프록시 서버 사용

### 8.3 투자 리스크 고지
```
⚠️ 중요 고지사항

1. 본 시스템은 투자 정보 제공 목적입니다
2. 투자 권유가 아닙니다
3. 투자 결정의 책임은 사용자에게 있습니다
4. 과거 성과가 미래 수익을 보장하지 않습니다
5. 암호화폐 투자는 고위험 자산입니다
```

---

## 🔧 9. 개발 환경 설정

### 9.1 필수 요구사항
- Node.js 18.0 이상
- npm 9.0 이상
- 모던 브라우저 (Chrome, Edge, Firefox)

### 9.2 폴더 구조

```
bithumb-analyzer/
├── backend/
│   ├── server.js          # Express 서버
│   └── package.json
├── frontend/
│   ├── src/
│   │   ├── App.jsx       # 메인 컴포넌트
│   │   ├── main.jsx      # 엔트리포인트
│   │   └── index.css     # Tailwind CSS
│   ├── index.html
│   ├── package.json
│   ├── vite.config.js
│   ├── tailwind.config.js
│   └── postcss.config.js
└── README.md
```

### 9.3 설치 및 실행

```bash
# 백엔드
cd backend
npm install
npm start

# 프론트엔드 (새 터미널)
cd frontend
npm install
npm run dev
```

자세한 설치 가이드는 [INSTALL.md](./INSTALL.md) 파일을 참고하세요.

---

## 📊 10. 성과 측정 지표 (KPI)

### 10.1 시스템 성능
- [ ] API 응답 속도 < 2초
- [ ] 백테스팅 완료 시간 < 5초
- [ ] 차트 렌더링 < 1초

### 10.2 예측 정확도
- [ ] 5% 목표 성공률 > 60%
- [ ] 10% 목표 성공률 > 40%
- [ ] 평균 수익률 > +2%

### 10.3 사용자 경험
- [ ] 서버 연결 성공률 > 99%
- [ ] UI 로딩 시간 < 3초
- [ ] 에러 발생률 < 1%

---

## 💼 11. 비즈니스 모델 (향후)

### 11.1 수익화 방안
1. **프리미엄 구독**
   - 무료: 1일 3회 분석
   - 월 9,900원: 무제한 분석 + 실시간 알림
   
2. **API 서비스**
   - 개발자용 API 제공
   - 트래픽 기반 과금

3. **교육 콘텐츠**
   - 백테스팅 전략 가이드
   - 투자 교육 강의

### 11.2 목표 사용자 수
- Phase 1: 100명 (테스터)
- Phase 2: 1,000명
- Phase 3: 10,000명

---

## 📞 12. 참고 자료

### 12.1 공식 문서
- [Bithumb API](https://apidocs.bithumb.com/)
- [React 문서](https://react.dev/)
- [Express 문서](https://expressjs.com/)
- [TailwindCSS 문서](https://tailwindcss.com/)

### 12.2 기술 참고
- [기술적 지표 설명](https://www.investopedia.com/terms/t/technicalindicator.asp)
- [백테스팅 방법론](https://www.investopedia.com/terms/b/backtesting.asp)
- [RSI 전략](https://www.investopedia.com/terms/r/rsi.asp)

---

## 🎉 13. 결론

### 13.1 프로젝트 성과
CAPAS는 복잡한 암호화폐 투자를 **단순하고 실행 가능한 신호**로 변환하여, 초보자도 쉽게 사용할 수 있는 **검증된 백테스팅 시스템**을 제공합니다.

### 13.2 핵심 차별점
1. ✅ **단순성**: 3가지 지표만 사용
2. ✅ **검증성**: 200일 백테스팅 결과 제공
3. ✅ **투명성**: 성공률/수익률 명확히 공개
4. ✅ **실용성**: 즉시 실전 투자 가능

### 13.3 다음 액션
1. 여러 코인 백테스팅
2. 성공률 60% 이상 코인 발견
3. 소액 실전 투자 테스트
4. 전략 최적화
5. Phase 2 기능 개발

---

**프로젝트 시작일**: 2024년 11월  
**현재 버전**: 1.1.0 (MVP+)  
**개발자**: hyunjugoo  
**라이선스**: One-time License (크몽 판매)

---

## 📸 14. 대시보드드

### 전체 화면 구성
![전체 화면](./images\대시보드.png)

<img width="1861" height="937" alt="대시보드" src="https://github.com/user-attachments/assets/ae6a12b6-0d86-4195-a1f5-896c44c1d69a" />
<img width="1863" height="939" alt="대시보드2" src="https://github.com/user-attachments/assets/b584a78a-ee88-4521-ae3d-7628da4ee1ff" />

<img width="1857" height="938" alt="모의투자" src="https://github.com/user-attachments/assets/b85142e3-ede2-47eb-8929-854afa966878" />

<img width="1847" height="934" alt="설정" src="https://github.com/user-attachments/assets/80bdf900-2f6b-482a-94e2-78022a87602d" />
<img width="1442" height="843" alt="내 계좌" src="https://github.com/user-attachments/assets/29aca18c-d900-43ec-9a0e-10e22d1dc650" />

<img width="1847" height="940" alt="추가매수 모달" src="https://github.com/user-attachments/assets/65ae84ea-0a43-407d-b4c0-afa525173f38" />

<img width="548" height="829" alt="추가 매도 모달" src="https://github.com/user-attachments/assets/38005f7b-dda5-4b97-ab62-5c7f4974f4e7" />




### 주요 기능별 화면
각 섹션의 상세 화면은 위의 기능 설명 섹션(6.1~6.5)을 참고하세요.

---

## 🔄 15. 최근 업데이트 (v1.1.0)

### 추가된 기능
- ✅ 보유 코인 거래 모달 (추가 매수/매도)
- ✅ 실시간 평가 손익 업데이트 (10초 간격)
- ✅ 빠른 설정 버튼 (10%, 25%, 50%, 100%)
- ✅ 토스트 알림 시스템
- ✅ 라이선스 키 시스템 (Supabase 연동)
- ✅ 데이터 내보내기/가져오기 기능
- ✅ 차트 줌 및 시간 범위 조정
- ✅ 분봉/일봉/주봉 지원

### 개선 사항
- ✅ 총 자산 계산 로직 개선 (보유 코인 가치 포함)
- ✅ 매도 시 평균 매수가 기준 profit 계산
- ✅ 실현 수익/손실 정확도 향상
- ✅ UI/UX 개선 (Glassmorphism 디자인)
- ✅ 로컬 스토리지 데이터 영속성

---

